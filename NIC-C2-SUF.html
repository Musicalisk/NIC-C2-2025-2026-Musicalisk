<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIC-C2-SUF | Gabriel Bouteiller</title>
</head>
<body>
    NIC-C2-SUF | Gabriel Bouteiller
    <hr>
    3. Make sure the user name is not already in use
    <hr>
    4. Have a message that tells the user their account is created.
    <hr>
    <h1 id="output"></h1>
    <hr>
    <form onsubmit="return false" id="input">
        <input type="text" id="inputOne" placeholder="Enter Username: ">
        <br>
        <input type="text" id="inputTwo" placeholder="Enter Email: ">
        <br>
        <input type="text" id="inputThree" placeholder="Enter Password: ">
        <br>
        <button onclick="main();">Create Account</button>
    </form>
    <hr>
    <script type="text/javascript">
        let output = ['<br>' + '<br>' + '<br>' + '<br>' + '<br>'];
        document.getElementById("output").innerHTML = output;
        output = "<hr>";
        var arrayOne = [];
        class Person{
            constructor(inputOne, inputTwo, inputThree){
                this.personName = inputOne;
                this.personEmail = inputTwo;
                this.personKey = inputThree;
            }
            methodOne(){
                return " / Username: " + this.personName + " / Email: " + this.personEmail + " / Password: " + this.personKey;
            }
        }
        function main(){
            document.getElementById("output").innerHTML = output;
            var inputOne = document.getElementById("inputOne").value;
            var inputTwo = document.getElementById("inputTwo").value;
            var inputThree = document.getElementById("inputThree").value;
            document.getElementById("input").reset();
            let index = inputTwo.indexOf('@');
            let first = inputTwo.substr(0, index);
            let last = inputTwo.substr(index);
            if(last == '@gmail.com' | '@yahoo.com'){
                if(inputThree.length >= 8){
                    let stringArray = inputThree.split("");
                    let upperCaseCheck = false;
                    for(let i = 0; i < stringArray.length; i++){
                        if(stringArray[i] === stringArray[i].toUpperCase()){
                            upperCaseCheck = true;
                            break;
                        }
                    }
                    if(upperCaseCheck === true){
                        let specialCharacterCheck = false;
                        for(let i = 0; i < stringArray.length; i++){
                            switch(stringArray[i]){
                                case '@':
                                case '#':
                                case '$':
                                case '!':
                                case '&':
                                case '.':
                                    specialCharacterCheck = true;
                                    break;
                                default:
                                    break;
                            }
                        }
                        if(specialCharacterCheck === true){
                            let numberCheck = false;
                            for(let i = 0; i < stringArray.length; i++){
                                switch(stringArray[i]){
                                    case '0':
                                    case '1':
                                    case '2':
                                    case '3':
                                    case '4':
                                    case '5':
                                    case '6':
                                    case '7':
                                    case '8':
                                    case '9':
                                        numberCheck = true;
                                        break;
                                    default:
                                        break;
                                }
                            }
                            if(numberCheck === true){
                                let usernameCheck = false;
                                let newAccount = new Person(inputOne, inputTwo, inputThree);
                                if(arrayOne.length == 0){
                                    usernameCheck = true;
                                    arrayOne.push(newAccount);
                                    output = "<br>";
                                    document.getElementById("output").innerHTML += output;
                                    output = " | Account: 1 " + arrayOne[0].methodOne();
                                    document.getElementById("output").innerHTML += output;
                                }
                                else{
                                    for(let i = 0; i < arrayOne.length; i++){
                                        if(arrayOne[i].personName == inputOne && usernameCheck == true){
                                            output = "<br>";
                                            document.getElementById("output").innerHTML += output;
                                            output = " | Username already in use: ";
                                            document.getElementById("output").innerHTML += output;
                                        }
                                        else{
                                            arrayOne.push(newAccount);
                                            output = "<br>";
                                            document.getElementById("output").innerHTML += output;
                                            output = " | Account: " + (i + 1) + arrayOne[i].methodOne();
                                            document.getElementById("output").innerHTML += output;
                                        }
                                    }
                                }
                            }    
                            else{
                                output = "<br>";
                                document.getElementById("output").innerHTML += output;
                                output = " | Please input at least One Number character: ";
                                document.getElementById("output").innerHTML += output;
                            }
                        }
                        else{
                            output = "<br>";
                            document.getElementById("output").innerHTML += output;
                            output = " | Please input at least One Special character: ";
                            document.getElementById("output").innerHTML += output;
                        }
                    }
                    else{
                        output = "<br>";
                        document.getElementById("output").innerHTML += output;
                        output = " | Please input at least One Upper case character: ";
                        document.getElementById("output").innerHTML += output;
                    }
                }
                else{
                    output = "<br>";
                    document.getElementById("output").innerHTML += output;
                    output = " | Please input at least Eight characters: ";
                    document.getElementById("output").innerHTML += output;
                }
            }
            else{
                document.getElementById("output").innerHTML = output;
                output = " | Input either @gmail.com or @yahoo.com: <br>";
                document.getElementById("output").innerHTML += output;
            }
        }

    </script>
</body>
</html>